<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Äscherei & Spalt – Planer</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0d1b2a" />
  <link rel="icon" href="Vermögenswerte/icon-192.png" />
  <link rel="apple-touch-icon" href="Vermögenswerte/icon-512.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="topbar">
  <div class="brand">
    <svg class="logo"><use href="Vermögenswerte /suedleder-icons.svg#logo"/></svg>
    <span>Äscherei & Spalt – Planer</span>
    <small id="modusBadge" class="badge"></small>
  </div>
  <nav class="actions">
    <button id="btnNeu" class="btn pri"><svg class="i"><use href="assets/suedleder-icons.svg#plus"/></svg>Neuer Eintrag</button>
    <button id="btnWochenansicht" class="btn"><svg class="i"><use href="assets/suedleder-icons.svg#calendar"/></svg>Woche</button>
    <button id="btnExport" class="btn"><svg class="i"><use href="assets/suedleder-icons.svg#export"/></svg>Export</button>
    <button id="btnImport" class="btn"><svg class="i"><use href="assets/suedleder-icons.svg#import"/></svg>Import</button>
    <button id="btnDaten" class="btn"><svg class="i"><use href="assets/suedleder-icons.svg#db"/></svg>Daten-Editor</button>
    <button id="btnEinstellungen" class="btn"><svg class="i"><use href="assets/suedleder-icons.svg#settings"/></svg>Einstellungen</button>
  </nav>
</header>

<main class="wrap">
  <section class="filters">
    <label>Tag
      <input type="date" id="tagInput"/>
    </label>
    <label>Schicht
      <select id="schichtSelect">
        <option value="">Alle</option>
        <option value="frueh">Früh</option>
        <option value="spaet">Spät</option>
        <option value="nacht">Nacht</option>
      </select>
    </label>
    <label>SPS
      <select id="spsFilter">
        <option value="">Alle</option>
        <option value="SPS 1">SPS 1</option>
        <option value="SPS 2">SPS 2</option>
      </select>
    </label>
    <button id="btnHeute" class="btn">Heute</button>
    <div class="legend">
      <span class="ampel ok">OK</span>
      <span class="ampel warn">Grenze</span>
      <span class="ampel err">Über Limit</span>
      <span class="ampel info">Timer läuft</span>
    </div>
  </section>

  <section class="table-card">
    <div class="table-scroll">
      <table id="planTabelle">
        <thead>
          <tr>
            <th>#</th>
            <th>Start</th>
            <th>SPS</th>
            <th>Fasstyp</th>
            <th>RZ</th>
            <th>Wechsel (C/UC)</th>
            <th>Gattung</th>
            <th>Gewichtsklasse</th>
            <th>Menge (kg)</th>
            <th>Stück (Auto)</th>
            <th>Konservierung</th>
            <th>Waschen</th>
            <th>Äscher ⌀</th>
            <th>Gesamt</th>
            <th>Fertig</th>
            <th>Rest</th>
            <th>Status</th>
            <th>Notiz</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="planBody"></tbody>
      </table>
    </div>
  </section>
</main>

<!-- Eintrag-Dialog -->
<dialog id="eintragDialog">
  <form method="dialog" class="dlg">
    <h3 id="dlgTitel">Eintrag</h3>
    <div class="grid">
      <label>Start <input type="time" id="f_start"></label>
      <label>SPS
        <select id="f_sps"><option>SPS 1</option><option>SPS 2</option></select>
      </label>
      <label>Fasstyp
        <select id="f_fasstyp"><option>Fass groß</option><option>Paddel groß</option><option>Paddel klein</option></select>
      </label>
      <label>RZ
        <select id="f_rz"></select>
      </label>
      <label>Wechsel (C/UC)
        <select id="f_switch"><option value="">—</option><option value="C">C</option><option value="UC">UC</option></select>
      </label>
      <label>Gattung
        <select id="f_gattung"><option>Kühe</option><option>Bullen</option><option>Kälber</option></select>
      </label>
      <label>Gewichtsklasse
        <select id="f_gewicht"></select>
      </label>
      <label>Menge (kg) <input type="number" id="f_menge" step="10" min="0"></label>
      <label>Konservierung
        <select id="f_konservierung">
          <option value="keine">keine</option>
          <option value="über_nacht">über Nacht (+24 h)</option>
          <option value="mehrtaegig_2">2 Tage (+48 h)</option>
          <option value="mehrtaegig_3">3 Tage (+72 h)</option>
        </select>
      </label>
      <label>Waschen
        <select id="f_waschen">
          <option value="auto">automatisch</option>
          <option value="1x">1× (≈60 min)</option>
          <option value="2x">2× (≈120 min)</option>
          <option value="0x">kein Waschen</option>
        </select>
      </label>
      <label>Ende Hauptweiche (optional)
        <input type="time" id="f_hauptweiche_ende">
      </label>
      <label>Status
        <select id="f_status"><option value="geplant">geplant</option><option value="läuft">läuft</option><option value="verschoben">verschoben</option><option value="fertig">fertig</option></select>
      </label>
      <label class="full">Notiz
        <input type="text" id="f_notiz" maxlength="140">
      </label>
    </div>
    <menu class="dlg-actions">
      <button class="btn" value="cancel">Abbrechen</button>
      <button id="btnSpeichern" class="btn pri" value="default">Speichern</button>
    </menu>
  </form>
</dialog>

<!-- Überschreiben -->
<dialog id="overrideDialog">
  <form method="dialog" class="dlg">
    <h3>Standard überschreiben?</h3>
    <p id="overrideText"></p>
    <menu class="dlg-actions">
      <button class="btn" value="once">Nur einmalig</button>
      <button class="btn pri" value="persist">Dauerhaft speichern</button>
      <button class="btn" value="cancel">Abbrechen</button>
    </menu>
  </form>
</dialog>

<!-- Einstellungen -->
<dialog id="settingsDialog">
  <form method="dialog" class="dlg">
    <h3>Einstellungen</h3>
    <div class="grid">
      <label>Waschen 1× (Minuten) <input type="number" id="s_wash1" min="0" step="5"></label>
      <label>Waschen 2× (Minuten) <input type="number" id="s_wash2" min="0" step="5"></label>
      <label>Wechsel „C“ (Minuten) <input type="number" id="s_c" min="0" step="1"></label>
      <label>Wechsel „UC“ (Minuten) <input type="number" id="s_uc" min="0" step="1"></label>
      <label>WE Frühstart <input type="time" id="s_we_start"></label>
      <label>WE max. Fässer <input type="number" id="s_we_max" min="1" step="1"></label>
      <label>Standard-Äscher (h) <input type="number" id="s_ae_std" min="1" step="0.5"></label>
    </div>
    <menu class="dlg-actions">
      <button class="btn" value="cancel">Schließen</button>
      <button id="btnSettingsSave" class="btn pri" value="default">Speichern</button>
    </menu>
  </form>
</dialog>

<!-- Daten-Editor -->
<dialog id="datenDialog">
  <form method="dialog" class="dlg">
    <h3>Daten-Editor (Gewichtsklassen, Stückzahlen, Rezepturen)</h3>
    <p><small>Hier kannst du Zahlen ohne Code ändern. Änderungen werden lokal gespeichert.</small></p>
    <div class="grid">
      <label class="full">gewichtsklassen.json
        <textarea id="editGewicht" rows="8" spellcheck="false"></textarea>
      </label>
      <label class="full">stueckzahl_limits.json
        <textarea id="editLimits" rows="10" spellcheck="false"></textarea>
      </label>
      <label class="full">rezepte.json
        <textarea id="editRezepte" rows="10" spellcheck="false"></textarea>
      </label>
    </div>
    <menu class="dlg-actions">
      <button class="btn" value="cancel">Schließen</button>
      <button id="btnDatenSpeichern" class="btn pri" value="default">Speichern</button>
    </menu>
  </form>
</dialog>

<script src="app.js" defer></script>
</body>
</html>
